(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{404:function(e,t,c){},405:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(39),s=c.n(r),a=c(26),i=c(426),j=c(424),o=c(204),d=c(411),u=c(28),b=c(48),l=c.n(b),O=c(123),h="SEARCH_CITY_REQ_START",f="SEARCH_CITY_REQ_SUCCESS",x="SEARCH_CITY_REQ_ERROR",p="ADD_TO_FAVORITE",y="REMOVE_FROM_FAVORITE",m=function(e){return{type:p,payload:{city:e}}},g=function(e){return{type:y,payload:{city:e}}},v="GET_DEFAULT_CITY_COORDS_REQ_START",C="GET_DEFAULT_CITY_COORDS_REQ_SUCCESS",R="GET_DEFAULT_CITY_COORDS_REQ_ERROR",w="FORECAST_FIVEDAYS_REQ_START",_="FORECAST_FIVEDAYS_REQ_SUCCESS",E="FORECAST_FIVEDAYS_REQ_ERROR",S=c(200),k=c(201),I=c.n(k),T=new function e(){Object(S.a)(this,e),this.myValue="3476f426c6d8f97027e143c1f5b3b21e",this.serverApi="https://api.openweathermap.org/data/2.5",this.client=I.a.create({baseURL:this.serverApi,params:{APPID:this.myValue}})},A=function(e){return function(){var t=Object(O.a)(l.a.mark((function t(c){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return c({type:w}),t.next=5,T.client.get("/forecast?id=".concat(e)).then((function(e){var t=e.data;c({type:_,payload:{forecast5city:t}})})).catch((function(e){var t=e.message;return c({type:E,payload:{error:t}})}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=c(3),F=Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(a.a)(e,2),c=t[0],r=t[1],s=Object(u.b)(),b=Object(n.useCallback)((function(e){return r(e.target.value)}),[]),p=Object(n.useCallback)((function(e){var t;e.preventDefault(),s((t=c,function(){var e=Object(O.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:h}),e.next=3,T.client.get("/weather?q=".concat(t)).then((function(e){var t=e.data;c({type:f,payload:{searchedCity:t}})})).catch((function(e){var t=e.message;return c({type:x,payload:{error:t}})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r("")}),[s,c]);return Object(D.jsxs)(i.a,{bg:"dark",variant:"dark",children:[Object(D.jsx)(i.a.Brand,{children:"My weather app"}),Object(D.jsxs)(j.a,{inline:!0,onSubmit:p,children:[Object(D.jsx)(o.a,{type:"text",placeholder:"Search city by name",className:"mr-sm-2",onChange:b,value:c}),Object(D.jsx)(d.a,{type:"submit",variant:"success",children:"Search"})]})]})})),q=c(420),P=c(421),M=c(427),N=c(205),Y=c(413),Q=c(414),V=c(418),U=c(222),L=c(223),W=c(99),H=c(231),B=c(412),G=c(206),J=Object(G.a)((function(e){var t,c;return(null===(t=e.forecastCity)||void 0===t||null===(c=t.forecast5city)||void 0===c?void 0:c.list)||[]}),(function(e){return e.map((function(e){return{name:e.dt_txt,temp:(e.main.temp-273.15).toFixed(0)}}))})),K=Object(n.memo)((function(){var e=Object(u.c)((function(e){return e.forecastCity.forecast5city})),t=Object(u.c)(J);return Object(u.c)((function(e){return e.forecastCity.isRequestInProgress}))?Object(D.jsx)(B.a,{animation:"grow"}):e?Object(D.jsxs)(N.a,{md:12,children:[Object(D.jsxs)("h2",{children:["Forecast for 5 day for city ",e.city.name]}),Object(D.jsx)(Y.a,{width:"100%",aspect:2.5,height:"300px",children:Object(D.jsxs)(Q.a,{width:1500,height:300,data:t,margin:{top:5,right:30,left:20,bottom:5},children:[Object(D.jsx)(V.a,{strokeDasharray:"3 3"}),Object(D.jsx)(U.a,{dataKey:"name"}),Object(D.jsx)(L.a,{}),Object(D.jsx)(W.a,{}),Object(D.jsx)(H.a,{type:"monotone",dataKey:"temp",stroke:"red",activeDot:{r:5}})]})})]}):null})),X=c(419),z=function(e){return"https://openweathermap.org/img/w/".concat(e,".png")},Z=function(e){var t=e.getHours(),c="0"+e.getMinutes(),n="0"+e.getSeconds();return t+":"+c.substr(-2)+":"+n.substr(-2)},$=Object(n.memo)((function(e){var t=e.city,c=e.canRemove,r=Object(u.b)(),s=t.sys,a=s.country,i=s.sunrise,j=s.sunset,o=t.main,b=t.wind,l=t.coord,O=t.id,h=t.weather,f=t.name,x=Object(n.useMemo)((function(){return new Date(1e3*i)}),[i]),p=Object(n.useMemo)((function(){return new Date(1e3*j)}),[j]),y=Object(n.useMemo)((function(){return(new Date).toLocaleDateString()}),[]),v=Object(n.useMemo)((function(){return Z(x)}),[x]),C=Object(n.useMemo)((function(){return Z(p)}),[p]),R=Object(n.useCallback)((function(){return r(g(t))}),[r,t]),w=Object(n.useCallback)((function(){return r(m(t))}),[r,t]),_=Object(n.useCallback)((function(){return r(A(O))}),[O,r]);return t?Object(D.jsxs)("div",{className:"single",children:[Object(D.jsx)("h2",{children:f}),Object(D.jsx)("img",{src:z(h[0].icon),alt:"weather"}),Object(D.jsx)("p",{style:{textAlign:"center"},children:h[0].description}),Object(D.jsx)(X.a,{striped:!0,bordered:!0,hover:!0,children:Object(D.jsxs)("tbody",{children:[Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"t\xb0 "}),Object(D.jsxs)("td",{children:[(o.temp-273.15).toFixed(0),"\u2103"]})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Country:"}),Object(D.jsx)("td",{children:a})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Today is:"}),Object(D.jsx)("td",{children:y})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Sunrise:"}),Object(D.jsx)("td",{children:v})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Sunset:"}),Object(D.jsx)("td",{children:C})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Humidity:"}),Object(D.jsxs)("td",{children:[o.humidity,"%"]})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Wind:"}),Object(D.jsxs)("td",{children:[b.deg?Object(D.jsxs)(n.Fragment,{children:["direction:\xa0",b.deg<90?Object(D.jsx)("span",{children:"North-East"}):null,b.deg>=90&&b.deg<180?Object(D.jsx)("span",{children:"South-East"}):null,b.deg>=180&&b.deg<270?Object(D.jsx)("span",{children:"South-West"}):null,b.deg>=270&&b.deg<360?Object(D.jsx)("span",{children:"North-West"}):null,", ",Object(D.jsx)("br",{})]}):null,"speed: ",b.speed," m/s"]})]}),Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:"Coordinates:"}),Object(D.jsxs)("td",{children:[l.lat," ",l.lon]})]})]})}),Object(D.jsx)(d.a,{onClick:_,variant:"dark",className:"mb-3",children:"Forecast for 5 days"}),c?Object(D.jsx)(d.a,{variant:"danger",onClick:R,className:"mb-3",children:"Remove from favorite"}):Object(D.jsx)(d.a,{onClick:w,className:"mb-3",children:"Add to favorite"})]}):Object(D.jsx)(B.a,{animation:"grow"})})),ee=Object(n.memo)((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.defaultCity.defaultCity})),c=Object(u.c)((function(e){return e.savedCities.cities})),r=t.sys,s=r.country,a=r.sunrise,i=r.sunset,j=t.main,o=t.wind,b=t.coord,l=t.weather,O=t.name,h=t.id,f=Object(n.useMemo)((function(){return new Date(1e3*a)}),[a]),x=Object(n.useMemo)((function(){return new Date(1e3*i)}),[i]),p=Object(n.useMemo)((function(){return(new Date).toLocaleDateString()}),[]),y=Object(n.useMemo)((function(){return Z(f)}),[f]),v=Object(n.useMemo)((function(){return Z(x)}),[x]),C=Object(n.useCallback)((function(){return e(g(t))}),[e,t]),R=Object(n.useMemo)((function(){return c.findIndex((function(e){return e.id===h}))>0}),[c,h]),w=Object(n.useCallback)((function(){return e(A(h))}),[h,e]),_=Object(n.useCallback)((function(){return e(m(t))}),[e,t]),E=Object(n.useCallback)((function(e){switch(!0){case e<90:return"North-East";case e>=90&&e<180:return"South-East";case e>=180&&e<270:return"South-West";case e>=270&&e<360:return"North-West";default:return"Checking"}}),[]);return t?Object(D.jsxs)("div",{className:"my-city",children:[Object(D.jsxs)("h2",{children:["Weather in your city: ",O]}),Object(D.jsx)("img",{src:z(l[0].icon),alt:"weather"}),Object(D.jsx)("p",{style:{textAlign:"center"},children:l[0].description}),Object(D.jsxs)("div",{className:"my-city--row my-city--row__name",children:[Object(D.jsx)("span",{children:"t\xb0"}),Object(D.jsx)("span",{children:"Country:"}),Object(D.jsx)("span",{children:"Today is:"}),Object(D.jsx)("span",{children:"Sunrise:"}),Object(D.jsx)("span",{children:"Sunset:"}),Object(D.jsx)("span",{children:"Humidity:"}),Object(D.jsx)("span",{children:"Wind:"}),Object(D.jsx)("span",{children:"Coordinates:"})]}),Object(D.jsxs)("div",{className:"my-city--row my-city--row__details",children:[Object(D.jsxs)("span",{children:[(j.temp-273.15).toFixed(0),"\u2103"]}),Object(D.jsx)("span",{children:s}),Object(D.jsx)("span",{children:p}),Object(D.jsx)("span",{children:y}),Object(D.jsx)("span",{children:v}),Object(D.jsxs)("span",{children:[j.humidity,"%"]}),Object(D.jsxs)("span",{children:[E(o.deg),Object(D.jsx)("br",{}),"speed: ",o.speed," m/s"]}),Object(D.jsxs)("span",{children:[b.lat," ",b.lon]})]}),Object(D.jsx)(d.a,{variant:"dark",className:"mb-3 mt-3",onClick:w,children:"Forecast for 5 days"}),R?Object(D.jsx)(d.a,{variant:"danger",onClick:C,children:"Remove from favorite"}):Object(D.jsx)(d.a,{onClick:_,children:"Add to favorite"})]}):Object(D.jsx)(B.a,{animation:"grow"})})),te=Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(a.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(""),i=Object(a.a)(s,2),j=i[0],o=i[1],d=Object(n.useState)(null),b=Object(a.a)(d,2),h=b[0],f=b[1],x=Object(u.b)(),p=Object(u.c)((function(e){return e.defaultCity.defaultCity})),y=Object(u.c)((function(e){return e.savedCities.error})),m=Object(u.c)((function(e){return e.savedCities.searchedCity})),g=Object(u.c)((function(e){return e.savedCities.cities})),w=Object(n.useCallback)((function(e){r(e.coords.longitude.toFixed(2)),o(e.coords.latitude.toFixed(2))}),[]);return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition(w)}),[w]),Object(n.useEffect)((function(){j&&c&&!h&&(x(function(e,t){return function(){var c=Object(O.a)(l.a.mark((function c(n){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n({type:v}),c.next=3,T.client.get("/weather?lat=".concat(e,"&lon=").concat(t)).then((function(e){var t=e.data;n({type:C,payload:{defaultCity:t}})})).catch((function(e){var t=e.message;n({type:R,payload:{error:t}})}));case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(j,c)),f(p))}),[h,x,j,c,p]),Object(D.jsxs)(n.Fragment,{children:[Object(D.jsxs)(q.a,{fluid:!0,children:[Object(D.jsx)(P.a,{children:y&&Object(D.jsxs)(M.a,{variant:"danger",children:["Request failed with status code 401"===y&&Object(D.jsx)("span",{children:"Bad access key."}),"Request failed with status code 404"===y&&Object(D.jsx)("span",{children:"Error, wrong city code using saved data."}),"Request failed with status code 429"===y&&Object(D.jsx)("span",{children:"You are using free tariff, try again in one minute."})]})}),p&&Object(D.jsx)(P.a,{children:Object(D.jsx)(N.a,{children:Object(D.jsx)(ee,{})})})]}),Object(D.jsxs)(q.a,{children:[Object(D.jsx)(P.a,{children:m&&Object(D.jsxs)(N.a,{children:[Object(D.jsx)("h2",{children:"Searched city"}),Object(D.jsx)($,{city:m})]})}),g.length>0&&Object(D.jsxs)(P.a,{children:[Object(D.jsx)(N.a,{md:12,children:Object(D.jsx)("h2",{children:"Favorite cities"})}),Object(D.jsx)("div",{className:"cities-list",children:g.map((function(e){return Object(D.jsx)(N.a,{md:4,children:Object(D.jsx)($,{city:e,canRemove:!0})},e.id)}))})]}),Object(D.jsx)(K,{})]})]})})),ce=function(){return Object(D.jsxs)(n.Fragment,{children:[Object(D.jsx)(F,{}),Object(D.jsx)(te,{})]})},ne=c(53),re=c(224),se=c(155),ae=c(225),ie=c.n(ae),je=c(23),oe={isRequestInProgress:!1,error:!1,cities:[]},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=void 0===c?"":c,r=t.payload,s=void 0===r?{}:r,a=s.searchedCity,i=s.error,j=s.city;switch(n){case h:return Object(je.a)(Object(je.a)({},e),{},{error:"",isRequestInProgress:!0});case f:return Object(je.a)(Object(je.a)({},e),{},{searchedCity:a,isRequestInProgress:!1});case x:return Object(je.a)(Object(je.a)({},e),{},{error:i,isRequestInProgress:!1});case p:return Object(je.a)(Object(je.a)({},e),{},{cities:e.cities.findIndex((function(e){return e.id===j.id}))>0?e.cities:e.cities.concat(j)});case y:return Object(je.a)(Object(je.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==j.id}))});default:return e}},ue={isRequestInProgress:!1,error:!1,forecast5city:null},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=void 0===c?"":c,r=t.payload,s=void 0===r?{}:r,a=s.error,i=s.forecast5city;switch(n){case w:return Object(je.a)(Object(je.a)({},e),{},{error:"",isRequestInProgress:!0});case _:return Object(je.a)(Object(je.a)({},e),{},{forecast5city:i,isRequestInProgress:!1});case E:return Object(je.a)(Object(je.a)({},e),{},{error:a,isRequestInProgress:!1});default:return e}},le={isRequestInProgress:!1,error:!1,defaultCity:null},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=void 0===c?"":c,r=t.payload,s=void 0===r?{}:r,a=s.defaultCity,i=s.error;switch(n){case v:return Object(je.a)(Object(je.a)({},e),{},{error:"",searchedCity:null,isRequestInProgress:!0});case C:return Object(je.a)(Object(je.a)({},e),{},{defaultCity:a,isRequestInProgress:!1});case R:return Object(je.a)(Object(je.a)({},e),{},{error:i,isRequestInProgress:!1});default:return e}},he=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ne.c,fe={key:"root",storage:ie.a},xe=Object(ne.b)({savedCities:de,defaultCity:Oe,forecastCity:be}),pe=Object(se.a)(fe,xe),ye=Object(ne.d)(pe,he(Object(ne.a)(re.a))),me=Object(se.b)(ye),ge=c(226),ve=c(423),Ce=c(229);c(404);ve.a({dsn:"https://703839e39c7f49f084d8de09a3514f1a@o961141.ingest.sentry.io/5909515",integrations:[new Ce.a.BrowserTracing],tracesSampleRate:1}),s.a.render(Object(D.jsx)(u.a,{store:ye,children:Object(D.jsx)(ge.a,{loading:null,persistor:me,children:Object(D.jsx)(ce,{})})}),document.getElementById("root"))}},[[405,1,2]]]);
//# sourceMappingURL=main.5a37b371.chunk.js.map