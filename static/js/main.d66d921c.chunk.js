(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{111:function(e,t,c){},112:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(13),s=c.n(r),i=c(18),a=c(120),j=c(119),o=c(57),d=c(114),u=c(8),b=c(19),l=c.n(b),O=c(32),h="GET_DEFAULT_CITY_COORDS_REQ_START",x="GET_DEFAULT_CITY_COORDS_REQ_SUCCESS",f="GET_DEFAULT_CITY_COORDS_REQ_ERROR",m="SEARCH_CITY_REQ_START",p="SEARCH_CITY_REQ_SUCCESS",y="SEARCH_CITY_REQ_ERROR",g="ADD_TO_FAVORITE",v="REMOVE_FROM_FAVORITE",C="FORECAST_FIVEDAYS_REQ_START",R="FORECAST_FIVEDAYS_REQ_SUCCESS",S="FORECAST_FIVEDAYS_REQ_ERROR",_=function(e){return{type:g,payload:{city:e}}},w=c(53),E=c(54),T=c.n(E),F=new function e(){Object(w.a)(this,e),this.myValue="3476f426c6d8f97027e143c1f5b3b21e",this.serverApi="https://api.openweathermap.org/data/2.5",this.client=T.a.create({baseURL:this.serverApi,params:{APPID:this.myValue}})},I=c(1),A=Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],s=Object(u.b)(),b=Object(n.useCallback)((function(e){return r(e.target.value)}),[]),h=Object(n.useCallback)((function(e){var t;e.preventDefault(),s((t=c,function(){var e=Object(O.a)(l.a.mark((function e(c){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:m}),e.next=3,F.client.get("/weather?q=".concat(t)).then((function(e){var t=e.data;c({type:p,payload:{searchedCity:t}})})).catch((function(e){var t=e.message;return c({type:y,payload:{error:t}})}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r("")}),[s,c]);return Object(I.jsxs)(a.a,{bg:"dark",variant:"dark",children:[Object(I.jsx)(a.a.Brand,{children:"My weather app"}),Object(I.jsxs)(j.a,{inline:!0,onSubmit:h,children:[Object(I.jsx)(o.a,{type:"text",placeholder:"Search city by name",className:"mr-sm-2",onChange:b,value:c}),Object(I.jsx)(d.a,{type:"submit",variant:"success",children:"Search"})]})]})})),k=c(117),D=c(118),M=c(121),q=c(58),P=c(6),N=c(59),Y=c.n(N),Q=function(e){return"https://openweathermap.org/img/w/".concat(e,".png")},V=Object(n.memo)((function(){var e=Object(n.useMemo)((function(){return{dots:!0,infinite:!0,speed:500,slidesToShow:6,slidesToScroll:5}}),[]),t=Object(u.c)((function(e){return e.forecast5city}));return t?Object(I.jsxs)("div",{children:[Object(I.jsxs)("h2",{children:["Forecast for 5 day for city ",t.city.name]}),Object(I.jsx)(Y.a,Object(P.a)(Object(P.a)({},e),{},{className:"forecast",children:t.list.map((function(e){return Object(I.jsxs)("div",{className:"forecast__item",children:[Object(I.jsx)("h4",{children:new Date(1e3*e.dt).toLocaleString().replace(/:[^:]*$/,"")}),Object(I.jsxs)("h5",{children:[(e.main.temp-273.15).toFixed(0),"\u2103"]}),Object(I.jsx)("img",{src:Q(e.weather[0].icon),alt:"weather"}),Object(I.jsx)("p",{children:e.weather[0].description})]},e.dt)}))}))]}):null})),L=c(115),U=c(116),W=c(28),H=function(e){var t=e.getHours(),c="0"+e.getMinutes(),n="0"+e.getSeconds();return t+":"+c.substr(-2)+":"+n.substr(-2)},B=Object(n.memo)((function(e){var t=e.city,c=e.addToFavorite,r=e.removeFromFavorite,s=Object(u.b)(),i=t.sys,a=t.main,j=t.wind,o=t.coord,b=t.id,l=t.weather,O=t.name,h=i.country,x=i.sunrise,f=i.sunset,m=Object(n.useMemo)((function(){return new Date(1e3*x)}),[x]),p=Object(n.useMemo)((function(){return new Date(1e3*f)}),[f]),y=Object(n.useMemo)((function(){return(new Date).toLocaleDateString()}),[]),g=Object(n.useMemo)((function(){return H(m)}),[m]),v=Object(n.useMemo)((function(){return H(p)}),[p]),C=Object(n.useCallback)((function(){return s(r(t))}),[s,t,r]),R=Object(n.useCallback)((function(){return c(t)}),[t,c]);return t&&Object.keys(t).length?Object(I.jsxs)("div",{className:"single",children:[Object(I.jsx)("h2",{children:O}),Object(I.jsx)("img",{src:Q(l[0].icon),alt:"weather"}),Object(I.jsx)("p",{style:{textAlign:"center"},children:l[0].description}),Object(I.jsx)(L.a,{striped:!0,bordered:!0,hover:!0,children:Object(I.jsxs)("tbody",{children:[Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"t\xb0 "}),Object(I.jsxs)("td",{children:[(a.temp-273.15).toFixed(0),"\u2103"]})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Country:"}),Object(I.jsx)("td",{children:h})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Today is:"}),Object(I.jsx)("td",{children:y})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Sunrise:"}),Object(I.jsx)("td",{children:g})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Sunset:"}),Object(I.jsx)("td",{children:v})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Humidity:"}),Object(I.jsxs)("td",{children:[a.humidity,"%"]})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Wind:"}),Object(I.jsxs)("td",{children:[j.deg?Object(I.jsxs)(n.Fragment,{children:["direction:\xa0",j.deg<90?Object(I.jsx)("span",{children:"North-East"}):null,j.deg>=90&&j.deg<180?Object(I.jsx)("span",{children:"South-East"}):null,j.deg>=180&&j.deg<270?Object(I.jsx)("span",{children:"South-West"}):null,j.deg>=270&&j.deg<360?Object(I.jsx)("span",{children:"North-West"}):null,", ",Object(I.jsx)("br",{})]}):null,"speed: ",j.speed," m/s"]})]}),Object(I.jsxs)("tr",{children:[Object(I.jsx)("td",{children:"Coordinates:"}),Object(I.jsxs)("td",{children:[o.lat," ",o.lon]})]})]})}),Object(I.jsx)(W.b,{to:"".concat(b),children:Object(I.jsx)(d.a,{variant:"dark",children:"Forecast for 5 days"})}),c&&Object(I.jsx)(d.a,{onClick:R,children:"Add to favorite"}),r&&Object(I.jsx)(d.a,{variant:"danger",onClick:C,children:"Remove from favorite"})]}):Object(I.jsx)(U.a,{animation:"grow"})})),G=Object(n.memo)((function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.defaultCity})),c=Object(u.c)((function(e){return e.cities})),r=t.sys,s=t.main,i=t.wind,a=t.coord,j=t.weather,o=t.name,b=t.id,l=r.country,O=r.sunrise,h=r.sunset,x=Object(n.useMemo)((function(){return new Date(1e3*O)}),[O]),f=Object(n.useMemo)((function(){return new Date(1e3*h)}),[h]),m=Object(n.useMemo)((function(){return(new Date).toLocaleDateString()}),[]),p=Object(n.useMemo)((function(){return H(x)}),[x]),y=Object(n.useMemo)((function(){return H(f)}),[f]),g=Object(n.useCallback)((function(){return e({type:v,payload:{city:t}})}),[e,t]),C=Object(n.useMemo)((function(){return c.findIndex((function(e){return e.id===b}))>0}),[c,b]),R=Object(n.useCallback)((function(){c.findIndex((function(e){return e.id===b}))>0||e(_(t))}),[c,e,t,b]),S=Object(n.useCallback)((function(e){switch(!0){case e<90:return"North-East";case e>=90&&e<180:return"South-East";case e>=180&&e<270:return"South-West";case e>=270&&e<360:return"North-West";default:return"Checking"}}),[]);return t?Object(I.jsxs)("div",{className:"my-city",children:[Object(I.jsxs)("h2",{children:["Weather in your city: ",o]}),Object(I.jsx)("img",{src:Q(j[0].icon),alt:"weather"}),Object(I.jsx)("p",{style:{textAlign:"center"},children:j[0].description}),Object(I.jsxs)("div",{className:"my-city--row my-city--row__name",children:[Object(I.jsx)("span",{children:"t\xb0"}),Object(I.jsx)("span",{children:"Country:"}),Object(I.jsx)("span",{children:"Today is:"}),Object(I.jsx)("span",{children:"Sunrise:"}),Object(I.jsx)("span",{children:"Sunset:"}),Object(I.jsx)("span",{children:"Humidity:"}),Object(I.jsx)("span",{children:"Wind:"}),Object(I.jsx)("span",{children:"Coordinates:"})]}),Object(I.jsxs)("div",{className:"my-city--row my-city--row__details",children:[Object(I.jsxs)("span",{children:[(s.temp-273.15).toFixed(0),"\u2103"]}),Object(I.jsx)("span",{children:l}),Object(I.jsx)("span",{children:m}),Object(I.jsx)("span",{children:p}),Object(I.jsx)("span",{children:y}),Object(I.jsxs)("span",{children:[s.humidity,"%"]}),Object(I.jsxs)("span",{children:[S(i.deg),Object(I.jsx)("br",{}),"speed: ",i.speed," m/s"]}),Object(I.jsxs)("span",{children:[a.lat," ",a.lon]})]}),Object(I.jsx)(d.a,{variant:"dark",className:"mb-3 mt-3",children:"Forecast for 5 days"}),C?Object(I.jsx)(d.a,{variant:"danger",onClick:g,children:"Remove from favorite"}):Object(I.jsx)(d.a,{onClick:R,children:"Add to favorite"})]}):Object(I.jsx)(U.a,{animation:"grow"})})),J=Object(n.memo)((function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)(""),a=Object(i.a)(s,2),j=a[0],o=a[1],d=Object(n.useState)(null),b=Object(i.a)(d,2),m=b[0],p=b[1],y=Object(n.useState)(!1),g=Object(i.a)(y,2),v=g[0],C=g[1],R=Object(u.b)(),S=Object(u.c)((function(e){return e.defaultCity})),w=Object(u.c)((function(e){return e.isRequestInProgress})),E=Object(u.c)((function(e){return e.error})),T=Object(u.c)((function(e){return e.searchedCity})),A=Object(u.c)((function(e){return e.cities})),P=function(e){r(e.coords.longitude.toFixed(2)),o(e.coords.latitude.toFixed(2))};Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition(P)}),[]),Object(n.useEffect)((function(){!w&&j&&c&&!m&&(R(function(e,t){return function(){var c=Object(O.a)(l.a.mark((function c(n){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n({type:h}),c.next=3,F.client.get("/weather?lat=".concat(e,"&lon=").concat(t)).then((function(e){var t=e.data;n({type:x,payload:{defaultCity:t}})})).catch((function(e){var t=e.message;n({type:f,payload:{error:t}}),console.log(t)}));case 3:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()}(j,c)),p(S))}),[m,R,w,j,c,S]);return Object(I.jsxs)(n.Fragment,{children:[Object(I.jsxs)(k.a,{fluid:!0,children:[Object(I.jsxs)(D.a,{children:[v&&Object(I.jsx)(M.a,{variant:"success",children:"This city has been already added to favorite!"}),E&&Object(I.jsxs)(M.a,{variant:"danger",children:["Request failed with status code 401"===E&&Object(I.jsx)("span",{children:"Bad access key."}),"Request failed with status code 404"===E&&Object(I.jsx)("span",{children:"Error, wrong city code using saved data."}),"Request failed with status code 429"===E&&Object(I.jsx)("span",{children:"You are using free tariff, try again in one minute."})]})]}),Object(I.jsx)(D.a,{children:Object(I.jsx)(q.a,{children:Object(I.jsx)(G,{})})})]}),Object(I.jsxs)(k.a,{children:[Object(I.jsx)(D.a,{children:Object.keys(T).length?Object(I.jsxs)(q.a,{children:[Object(I.jsx)("h2",{children:"Searched city"}),Object(I.jsx)(B,{city:T,addToFavorite:function(e){var t=A,c=t.findIndex((function(t){return t.id===e.id}));-1===c?R(_(e)):(t[c]=e,C(!0),setTimeout((function(){C(!1)}),4e3))}})]}):null}),A.length>0&&Object(I.jsxs)(D.a,{children:[Object(I.jsx)(q.a,{md:12,children:Object(I.jsx)("h2",{children:"Favorite cities"})}),A.map((function(e){return Object(I.jsx)(q.a,{md:4,children:Object(I.jsx)(B,{city:e})},e.id)}))]}),Object(I.jsx)(q.a,{md:12,children:Object(I.jsx)(V,{})})]})]})})),X=function(){return Object(I.jsxs)(n.Fragment,{children:[Object(I.jsx)(A,{}),Object(I.jsx)(J,{})]})},$=c(14),z=c(60),K=c(40),Z=c(61),ee=c.n(Z),te=c(63),ce={isRequestInProgress:!1,error:!1,defaultCity:null,searchedCity:null,cities:[],forecast5city:null},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,c=t.type,n=void 0===c?"":c,r=t.payload,s=void 0===r?{}:r,i=s.defaultCity,a=s.searchedCity,j=s.error,o=s.city,d=s.forecast5city;switch(n){case h:return Object(P.a)(Object(P.a)({},e),{},{error:"",searchedCity:{},isRequestInProgress:!0});case x:return Object(P.a)(Object(P.a)({},e),{},{defaultCity:i,isRequestInProgress:!1});case f:return Object(P.a)(Object(P.a)({},e),{},{error:j,isRequestInProgress:!1});case m:return Object(P.a)(Object(P.a)({},e),{},{error:"",isRequestInProgress:!0});case p:return Object(P.a)(Object(P.a)({},e),{},{searchedCity:a,isRequestInProgress:!1});case y:return Object(P.a)(Object(P.a)({},e),{},{error:j,isRequestInProgress:!1});case g:return Object(P.a)(Object(P.a)({},e),{},{cities:[].concat(Object(te.a)(e.cities),[o])});case v:return Object(P.a)(Object(P.a)({},e),{},{cities:e.cities.filter((function(e){return e.id!==o.id}))});case C:return Object(P.a)(Object(P.a)({},e),{},{error:"",isRequestInProgress:!0});case R:return Object(P.a)(Object(P.a)({},e),{},{forecast5city:d,isRequestInProgress:!1});case S:return Object(P.a)(Object(P.a)({},e),{},{error:j,isRequestInProgress:!1});default:return e}},re=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||$.c,se={key:"root",storage:ee.a},ie=Object(K.a)(se,ne),ae=Object($.d)(ie,re(Object($.a)(z.a))),je=Object(K.b)(ae),oe=c(62);c(111);s.a.render(Object(I.jsx)(u.a,{store:ae,children:Object(I.jsx)(oe.a,{loading:null,persistor:je,children:Object(I.jsx)(W.a,{children:Object(I.jsx)(X,{})})})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.d66d921c.chunk.js.map